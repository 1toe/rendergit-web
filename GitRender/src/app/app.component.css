/* Variables CSS para temas */
:root {
  --bg-light: #ffffff;
  --border-light: #e2e8f0;
  --text-light: #1a202c;
  --muted-light: #6b7280;
  --accent-light: #0366d6;
  --accent-hover-light: #024faa;
  --sidebar-bg-light: #f9fafb;
  --code-bg-light: #0d1117;
  --code-text-light: #e6edf3;
  --shadow-light: rgba(0, 0, 0, 0.1);
}

.dark-theme {
  --bg: #1a202c;
  --border: #374151;
  --text: #f9fafb;
  --muted: #9ca3af;
  --accent: #60a5fa;
  --accent-hover: #3b82f6;
  --sidebar-bg: #111827;
  --code-bg: #0d1117;
  --code-text: #e6edf3;
  --shadow: rgba(0, 0, 0, 0.3);
}

.light-theme {
  --bg: var(--bg-light);
  --border: var(--border-light);
  --text: var(--text-light);
  --muted: var(--muted-light);
  --accent: var(--accent-light);
  --accent-hover: var(--accent-hover-light);
  --sidebar-bg: var(--sidebar-bg-light);
  --code-bg: var(--code-bg-light);
  --code-text: var(--code-text-light);
  --shadow: var(--shadow-light);
}

/* Transiciones suaves para cambios de tema */
* {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
}

/* Estilos del componente principal */
:host { display:block; height:100%; }

.app-shell {
  --bg:#ffffff; --border:#e2e8f0; --text:#1a202c; --muted:#6b7280; --accent:#0366d6; --accent-hover:#024faa; --radius:6px;
  font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif;
  color:var(--text);
  background: var(--bg);
  min-height: 100vh;
}
.topbar {
  position:sticky; top:0; z-index:10;
  display:flex; gap:1rem; align-items:center; justify-content: space-between;
  padding:.75rem 1rem; border-bottom:1px solid var(--border);
  background: var(--bg);
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.header-left { display: flex; align-items: center; gap: 1rem; }
.header-center { flex: 1; display: flex; justify-content: center; }
.header-right { display: flex; align-items: center; gap: 0.5rem; }

.logo { margin:0; font-size:1.15rem; letter-spacing:.5px; font-weight:600; }

.nav-controls { display: flex; gap: 0.25rem; }
.nav-btn {
  background: var(--sidebar-bg); border: 1px solid var(--border); border-radius: var(--radius);
  padding: 0.4rem 0.6rem; cursor: pointer; font-size: 0.9rem;
  transition: all 0.2s ease;
}
.nav-btn:hover:not(:disabled) { background: var(--border); }
.nav-btn:disabled { opacity: 0.5; cursor: not-allowed; }

.theme-toggle, .scroll-top {
  background: var(--accent); color: #fff; border: 1px solid var(--accent); border-radius: var(--radius);
  padding: 0.5rem; cursor: pointer; font-size: 0.9rem; transition: all 0.2s ease;
}
.theme-toggle:hover, .scroll-top:hover { background: var(--accent-hover); }
.logo { margin:0; font-size:1.15rem; letter-spacing:.5px; font-weight:600; }
.repo-form { display:flex; gap:.5rem; flex:1; }
.repo-form input { flex:1; padding:.55rem .75rem; border:1px solid var(--border); border-radius:var(--radius); font-size:.9rem; }
.repo-form input:focus { outline:2px solid var(--accent); outline-offset:1px; }
.repo-form button { background:var(--accent); color:#fff; border:1px solid var(--accent); padding:.55rem 1rem; border-radius:var(--radius); font-size:.85rem; font-weight:600; cursor:pointer; }
.repo-form button:disabled { opacity:.5; cursor:default; }
.repo-form button:not(:disabled):hover { background:var(--accent-hover); }

.layout { display:grid; grid-template-columns:300px minmax(0,1fr); height:calc(100dvh - 56px); }

.sidebar {
  border-right:1px solid var(--border);
  padding:0.75rem 0.75rem 2rem;
  overflow:auto;
  background: var(--sidebar-bg);
  transition: all 0.3s ease;
  position: relative;
}

.sidebar-collapsed .sidebar {
  width: 60px;
  overflow: hidden;
}

.sidebar-collapsed .sidebar .sidebar-content {
  opacity: 0;
  pointer-events: none;
}

.sidebar:hover .sidebar-content {
  opacity: 1;
  pointer-events: auto;
}

.sidebar-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: 1rem;
  padding: 0 0.75rem;
}

.sidebar-toggle, .sidebar-pin {
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 0.4rem;
  cursor: pointer;
  font-size: 0.8rem;
  transition: all 0.2s ease;
}

.sidebar-toggle:hover, .sidebar-pin:hover { background: var(--border); }
.sidebar-pin.active { background: var(--accent); color: #fff; }

.search-section { margin-bottom: 1.25rem; }
.search-input-wrapper { position: relative; }
.search-input-wrapper input { width: 100%; padding-right: 2rem; }
.clear-search {
  position: absolute; right: 0.5rem; top: 50%; transform: translateY(-50%);
  background: none; border: none; cursor: pointer; font-size: 1.2rem; color: var(--muted);
}
.sidebar-section { margin-bottom:1.25rem; }
.sidebar-section.meta { font-size:.75rem; line-height:1.2; }
.sidebar-section.meta a { color:var(--accent); text-decoration:none; }
.sidebar-section.meta a:hover { text-decoration:underline; }
.filter-label { display:block; font-size:.65rem; text-transform:uppercase; letter-spacing:1px; color:var(--muted); margin-bottom:.25rem; }
.sidebar input[type=text] { width:100%; padding:.4rem .55rem; border:1px solid var(--border); border-radius:var(--radius); font-size:.75rem; }
.sidebar h2 { margin:0 0 .5rem; font-size:.85rem; text-transform:uppercase; letter-spacing:.5px; color:#334155; }
.toc ul { list-style:none; margin:0; padding:0; max-height:35vh; overflow:auto; font-size:.72rem; }
.toc li { padding:.15rem 0; white-space:nowrap; text-overflow:ellipsis; overflow:hidden; }
.toc a { color:#0366d6; text-decoration:none; }
.toc a:hover { text-decoration:underline; }
.size { color:var(--muted); font-size:.65rem; }
.switches { display:flex; gap:.4rem; flex-wrap:wrap; }
.switch { flex:1 1 auto; padding:.4rem .5rem; background:#fff; border:1px solid var(--border); border-radius:var(--radius); font-size:.7rem; cursor:pointer; font-weight:500; }
.switch.active { background:var(--accent); border-color:var(--accent); color:#fff; }
.switch:not(.active):hover { background:#f1f5f9; }

.content { overflow:auto; padding:1rem 1.25rem 3rem; background:var(--bg); }
.intro { color:var(--muted); font-size:.9rem; max-width:620px; }
.tree { background:var(--sidebar-bg); padding:.75rem; border:1px solid var(--border); border-radius:var(--radius); font-size:.7rem; line-height:1.15; }
.skips details { margin-bottom:.5rem; font-size:.7rem; }
.skips summary { cursor:pointer; font-weight:600; }
.skips ul { margin:.25rem 0 .5rem 1rem; padding:0; }
.skips li { list-style:disc; }

.files { margin-top:2rem; }
.file { border-top:1px solid var(--border); padding:1rem 0; }
.file h3 { margin:0 0 .5rem; font-size:.9rem; display:flex; gap:.5rem; align-items:baseline; word-break:break-all; }
.file-body pre {
  background: var(--code-bg);
  color: var(--code-text);
  padding:.75rem;
  border-radius:var(--radius);
  overflow:auto;
  font-size:.7rem;
  line-height:1.25;
}
.file-body code { font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace; }
.file-body h1,.file-body h2,.file-body h3 { margin-top:1.25rem; }
.back-top { display:inline-block; margin-top:.5rem; font-size:.65rem; text-decoration:none; color:var(--accent); }
.back-top:hover { text-decoration:underline; }

.llm-view .cxml { width:100%; min-height:60vh; font-family:ui-monospace,Consolas,monospace; font-size:.65rem; line-height:1.3; padding:.75rem; border:1px solid var(--border); border-radius:var(--radius); background:#f8fafc; resize:vertical; }
.hint { color:var(--muted); font-size:.7rem; margin-top:.5rem; }

.loading-state { display:flex; flex-direction:column; align-items:center; gap:.75rem; margin:2rem 0; }
.spinner { width:32px; height:32px; border:3px solid #cbd5e1; border-top-color:var(--accent); border-radius:50%; animation:spin 0.8s linear infinite; }
@keyframes spin { to { transform:rotate(360deg); } }

.error { background:#fee2e2; border:1px solid #fecaca; padding:.75rem 1rem; border-radius:var(--radius); margin:1rem; color:#991b1b; font-size:.85rem; }

@media (max-width: 900px) {
  .layout { grid-template-columns: 220px 1fr; }
  .sidebar-collapsed .layout { grid-template-columns: 60px 1fr; }
}
@media (max-width: 700px) {
  .layout { grid-template-columns: 1fr; }
  .sidebar { position:static; height:auto; border-right:none; border-bottom:1px solid var(--border); }
  .sidebar-collapsed .sidebar { height: auto; }
}
